<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ productDetail?.name || 'Chi ti·∫øt s·∫£n ph·∫©m' }}</title>
</head>
<body>
    <app-header></app-header>
    
    <!-- Toast Container -->
    <div id="toast-container" class="p-toast"></div>
    
    <div class="product-detail-container">
        <!-- Product Overview -->
        <div class="p-card product-overview-card">
            <div class="p-card-body">
                <div class="p-card-content">
                    <div class="p-grid">
                        <!-- Left Section -->
                        <div class="p-col-12 p-md-6 left-section">
                            <h1 id="product-name">{{ productDetail?.name }}</h1>
                            <span class="subtitle">New 100% - B·∫£o H√†nh 12 th√°ng t·∫°i Trung Tr·∫ßn</span>
                            
                            <div class="gallery-container">
                                <p-galleria 
                                    [value]="productImages" 
                                    [showIndicators]="true" 
                                    [showThumbnails]="true" 
                                    [changeItemOnIndicatorHover]="true" 
                                    [responsiveOptions]="responsiveOptions" 
                                    [containerStyle]="{ 'max-width': '500px' }"> 
                                    <ng-template pTemplate="item" let-item>
                                        <div class="galleria-main-image">
                                            <img [src]="item.itemImageSrc" alt="Product Image">
                                        </div>
                                    </ng-template>
                                    <ng-template pTemplate="thumbnail" let-item>
                                        <div class="galleria-thumbnail">
                                            <img [src]="item.itemImageSrc" alt="Thumbnail">
                                        </div>
                                    </ng-template>
                                </p-galleria>
                            </div>
                        </div>
                        
                        <!-- Right Section -->
                        <div class="p-col-12 p-md-6 right-section">
                            <h1 class="product-title">{{ productDetail?.name }}</h1>
                            
                            <div class="product-rating">
                                <div class="p-rating">
                                    <i class="pi pi-star-fill active"></i>
                                    <i class="pi pi-star-fill active"></i>
                                    <i class="pi pi-star-fill active"></i>
                                    <i class="pi pi-star-fill active"></i>
                                    <i class="pi pi-star-fill active"></i>
                                </div>
                                <span>4.8 (128 ƒë√°nh gi√°)</span>
                            </div>
                            
                            <div class="price-section">
                                <span class="current-price">{{ formatPrice(productDetail?.price) }}</span>
                                <span class="original-price" *ngIf="productDetail?.originalPrice">{{ formatPrice(productDetail?.originalPrice) }}</span>
                                <span class="discount" *ngIf="productDetail?.originalPrice">{{ calculateDiscount(productDetail?.price, productDetail?.originalPrice) }}%</span>
                            </div>
                            
                            <div class="availability-section">
                                <span class="in-stock" *ngIf="productDetail?.quantity > 0">
                                    <i class="pi pi-check-circle"></i> C√≤n h√†ng - Giao h√†ng trong 24h
                                </span>
                                <span class="out-of-stock" *ngIf="productDetail?.quantity <= 0">
                                    <i class="pi pi-times-circle"></i> H·∫øt h√†ng
                                </span>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="p-button p-button-primary" [disabled]="productDetail?.quantity <= 0">
                                    <i class="pi pi-shopping-cart"></i> Mua ngay
                                </button>
                                <button class="p-button p-button-secondary" [disabled]="productDetail?.quantity <= 0" (click)="addToCart(productDetail?.id)">
                                    <i class="pi pi-plus"></i> Th√™m v√†o gi·ªè
                                </button>
                            </div>
                            
                            <div class="promotion-section">
                                <h3 class="promotion-title">∆Øu ƒë√£i ƒë·∫∑c bi·ªát</h3>
                                <div class="promotion-card">
                                    <div class="promotion-item">
                                        <div class="promotion-icon">üéÅ</div>
                                        <div>T·∫∑ng balo gaming ROG tr·ªã gi√° 1.200.000ƒë</div>
                                    </div>
                                    <div class="promotion-item">
                                        <div class="promotion-icon">üéÅ</div>
                                        <div>Chu·ªôt gaming ASUS ROG Gladius III tr·ªã gi√° 1.900.000ƒë</div>
                                    </div>
                                    <div class="promotion-item">
                                        <div class="promotion-icon">üéÅ</div>
                                        <div>Gi·∫£m 50% khi mua Office Home & Student 2024</div>
                                    </div>
                                    <div class="promotion-item">
                                        <div class="promotion-icon">üéÅ</div>
                                        <div>Tr·∫£ g√≥p 0% l√£i su·∫•t trong 12 th√°ng</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Section Title -->
        <h2 class="section-title">Th√¥ng S·ªë Ch√≠nh</h2>
        
        <!-- Product Description and Specifications -->
        <div class="p-grid">
            <!-- Description -->
            <div class="p-col-12 p-lg-8">
                <div class="p-card description-card">
                    <div class="p-card-body">
                        <div class="p-card-content description-content">
                            <div [innerHTML]="productDetail?.description"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Specifications -->
            <div class="p-col-12 p-lg-4">
                <div class="p-card specs-card">
                    <div class="specs-header">
                        <h3>Th√¥ng s·ªë k·ªπ thu·∫≠t</h3>
                    </div>
                    <div class="p-card-body">
                        <div class="p-card-content specs-content">
                            <table class="spec-table">
                                <tr *ngFor="let attribute of productAttributes">
                                    <td class="spec-name">{{ attribute.key }}</td>
                                    <td class="spec-value">{{ attribute.value }}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>